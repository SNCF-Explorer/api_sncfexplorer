@startuml üåê API SNCF - Flux principaux 
title üåê API SNCF - Flux principaux

skinparam backgroundColor #f9fafc
skinparam participant {
  BackgroundColor #ffffff
  BorderColor #333
  FontColor #333
}

actor Agent #ffcc00
participant "Frontend React" as Front #b3d9ff
participant "API SNCF" as API #b2f7ef
database "MongoDB" as DB #ffd6a5

== üü¶ Requ√™te GET : R√©cup√©ration de la cat√©gorie ==

Agent -[#blue]-> Front : va sur la map
Front -[#blue]-> API : <b>GET</b> /v1/data/categories/
API -[#blue]-> DB : requ√™te MongoDB
DB -[#green,dashed]-> API : Donn√©es cat√©gorie (JSON)
API -[#green]-> Front : <b>200 OK</b> (JSON ok)
Front -[#black]-> Agent : affiche les donn√©es sur la carte

== üü¶ Requ√™te GET : R√©cup√©ration d'une cat√©gorie ==

Agent -[#blue]-> Front : recherche une cat√©gorie (ex : <b>Paris</b>)
Front -[#blue]-> API : <b>GET</b> /v1/data/categories/{id}/
API -[#blue]-> DB : requ√™te MongoDB
DB -[#green,dashed]-> API : donn√©es de la cat√©gorie Paris
API -[#green]-> Front : <b>200 OK</b> (JSON cat√©gorie)
Front -[#black]-> Agent : affiche la cat√©gorie sur la carte

== üüß Requ√™te POST : Ajout d'une cat√©gorie ==

Agent -[#orange]-> Front : ajoute un √©l√©ment d'une cat√©gorie
Front -[#orange]-> API : <b>POST</b> /v1/data/categories/{id}/
API -[#orange]-> DB : insertion de la donn√©e dans MongoDB
DB -[#green,dashed]-> API : <b>200 OK</b>
API -[#green]-> Front : JSON de confirmation
Front -[#black]-> Agent : cat√©gorie ajout√©e √† la carte

== üü• Requ√™te DELETE : Ajout d'une cat√©gorie ==
Agent -[#orange]-> Front : supprime un √©l√©ment d'une cat√©gorie
Front -[#orange]-> API : <b>POST</b> /v1/data/categories/{id}/
API -[#orange]-> DB : Suppression de la donn√©e dans MongoDB
DB -[#green,dashed]-> API : <b>200 OK</b>
API -[#green]-> Front : JSON de confirmation
Front -[#black]-> Agent : donn√©e supprim√©e de la carte

@enduml
